<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NAK 체스 게임 - 플레이</title>
  <link rel="stylesheet" href="main.css">
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <header id="header" class="header">
    <div class="container">
      <div class="logo">
        <h1><i class="fas fa-chess-king"></i> NAK 체스</h1>
      </div>
      <nav class="nav">
        <ul class="nav-list" id="nav-list">
          <li><a href="index.html" class="nav-link">홈</a></li>
          <li><a href="#lobby" class="nav-link active">대기실</a></li>
          <li><a href="stats.html" class="nav-link">통계</a></li>
        </ul>
      </nav>
      <div class="mobile-nav-toggle" id="mobile-nav-toggle">
        <i class="fas fa-bars"></i>
      </div>
    </div>
  </header>

  <main class="game-main">
    <div class="container">
    
      <!-- 로비 화면 -->
      <section id="lobby" class="game-section lobby-section reveal visible">
        <div class="section-header">
          <h2>게임 대기실</h2>
          <p>플레이어 정보를 입력하고 게임 방을 생성하거나 참가하세요</p>
        </div>
        
        <div class="lobby-content">
          <div class="lobby-card user-form-card">
            <h3><i class="fas fa-user-circle"></i> 플레이어 정보</h3>
            <div class="form-group">
              <label for="playerNameInput">닉네임</label>
              <input type="text" id="playerNameInput" placeholder="사용할 닉네임을 입력하세요">
            </div>
          </div>
          
          <div class="lobby-card room-create-card">
            <h3><i class="fas fa-plus-square"></i> 새로운 방 만들기</h3>
            <div class="form-group">
              <label for="roomIdInput">방 ID</label>
              <input type="text" id="roomIdInput" placeholder="독특한 방 ID를 만드세요">
            </div>
            <button id="createRoomBtn" class="btn btn-primary">
              <i class="fas fa-plus-circle"></i> 방 만들기
            </button>
          </div>
            
          <div class="lobby-card room-list-card">
            <div class="room-list-header">
              <h3><i class="fas fa-door-open"></i> 참가 가능한 방</h3>
              <button id="refreshRoomListBtn" class="btn btn-outline btn-sm">
                <i class="fas fa-sync-alt"></i> 새로고침
              </button>
            </div>
            <div id="roomList" class="room-list">
              <!-- 방 목록이 여기에 동적으로 추가됩니다. -->
              <div class="no-rooms-message">
                <i class="fas fa-inbox"></i>
                <p>현재 참가할 수 있는 방이 없습니다.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 대기 화면 -->
      <section id="gameSetup" class="game-section waiting-section" style="display: none;">
        <div class="waiting-content">
          <div class="waiting-card">
            <div class="waiting-icon">
              <div class="spinner"></div>
            </div>
            <h2>게임 준비 중</h2>
            <p id="waitingMsg">상대방을 기다리고 있습니다...</p>
            <div id="roomInfo" class="room-info"></div>
            <div class="waiting-actions">
              <button id="backToLobbyBtn" class="btn btn-outline">
                <i class="fas fa-arrow-left"></i> 대기실로 돌아가기
              </button>
            </div>
          </div>
        </div>
      </section>
    
      <!-- 게임 화면 -->
      <section id="gameBoard" class="game-section game-play-section" style="display: none;">
        <!-- 게임 화면 내용은 app.js에 의해 동적으로 관리됩니다. -->
      </section>
    </div>
  </main>

  <!-- 푸터 -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-text">
          <p>&copy; 2024 NAK 체스. All Rights Reserved.</p>
        </div>
        <div class="footer-links">
          <a href="#"><i class="fab fa-github"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <!-- 템플릿 -->
  <template id="roomItemTemplate">
    <div class="room-item">
      <div class="room-details">
        <i class="fas fa-chess-board"></i>
        <h4 class="room-id"></h4>
      </div>
      <button class="btn btn-primary join-btn">
        <i class="fas fa-sign-in-alt"></i> 참가
      </button>
    </div>
  </template>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/app.js"></script>
  <script>
    // main.js와 index.html에 있던 스크립트들을 여기에 통합합니다.
    document.addEventListener('DOMContentLoaded', () => {
      const header = document.getElementById('header');
      const navList = document.getElementById('nav-list');
      const mobileNavToggle = document.getElementById('mobile-nav-toggle');

      // Header scroll effect
      window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      });

      // Mobile navigation
      if (mobileNavToggle) {
        mobileNavToggle.addEventListener('click', () => {
          navList.classList.toggle('mobile-active');
          const icon = mobileNavToggle.querySelector('i');
          icon.classList.toggle('fa-bars');
          icon.classList.toggle('fa-times');
        });
      }

      // Reveal on scroll (for landing page, but can be reused)
      const revealElements = document.querySelectorAll('.reveal');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });

      revealElements.forEach(el => observer.observe(el));
    });
  </script>
</body>
</html>