<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>리더보드 - NAK 체스 게임</title>
  <meta name="description" content="NAK 체스 리더보드에서 최고의 플레이어들을 확인하세요. 일간, 주간, 전체 랭킹과 상세 통계를 제공합니다.">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="main.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Skip to Content -->
  <a href="#main-content" class="skip-to-content">메인 컨텐츠로 이동</a>

  <header id="header" class="header" role="banner">
    <div class="container">
      <div class="logo">
        <h1><a href="index.html" style="text-decoration: none; color: inherit;"><i class="fas fa-chess-king" aria-hidden="true"></i> NAK 체스</a></h1>
      </div>
      <nav class="nav" role="navigation" aria-label="메인 네비게이션">
        <ul class="nav-list" id="nav-list">
          <li><a href="index.html" class="nav-link">홈</a></li>
          <li><a href="features.html" class="nav-link">기능</a></li>
          <li><a href="how-to-play.html" class="nav-link">게임 방법</a></li>
          <li><a href="chess-rules.html" class="nav-link">체스 규칙</a></li>
          <li><a href="leaderboard.html" class="nav-link active">리더보드</a></li>
          <li><a href="stats.html" class="nav-link">통계</a></li>
        </ul>
      </nav>
      <div class="header-actions">
        <!-- Dark Mode Toggle -->
        <button id="dark-mode-toggle" class="icon-btn" aria-label="다크모드 전환" title="다크모드 전환">
          <i class="fas fa-moon"></i>
        </button>

        <!-- Auth Links / Profile -->
        <div id="auth-links" class="auth-links">
          <a href="login.html" class="btn btn-sm btn-outline">로그인</a>
          <a href="game.html" class="btn btn-sm btn-primary">게임 시작</a>
        </div>
      </div>
      <div class="mobile-nav-toggle" id="mobile-nav-toggle" aria-label="모바일 메뉴 토글">
        <i class="fas fa-bars"></i>
      </div>
    </div>
  </header>

  <main id="main-content">
    <!-- Page Hero -->
    <section class="page-hero">
      <div class="container">
        <div class="page-hero-content reveal">
          <h1><i class="fas fa-trophy"></i> 리더보드</h1>
          <p>최고의 체스 마스터들과 경쟁하세요</p>
        </div>
      </div>
    </section>

    <!-- Leaderboard Page -->
    <section class="leaderboard-page">
      <div class="container">
        <!-- Time Period Selector -->
        <div class="leaderboard-controls reveal">
          <div class="period-tabs">
            <button class="period-tab active" data-period="daily">
              <i class="fas fa-calendar-day"></i>
              <span>일간</span>
            </button>
            <button class="period-tab" data-period="weekly">
              <i class="fas fa-calendar-week"></i>
              <span>주간</span>
            </button>
            <button class="period-tab" data-period="monthly">
              <i class="fas fa-calendar-alt"></i>
              <span>월간</span>
            </button>
            <button class="period-tab" data-period="all-time">
              <i class="fas fa-infinity"></i>
              <span>전체</span>
            </button>
          </div>

          <div class="leaderboard-filters">
            <select id="gameTypeFilter" class="filter-select">
              <option value="all">모든 게임</option>
              <option value="blitz">블리츠</option>
              <option value="rapid">래피드</option>
              <option value="classic">클래식</option>
            </select>

            <button id="refreshLeaderboard" class="btn btn-outline btn-sm">
              <i class="fas fa-sync-alt"></i> 새로고침
            </button>
          </div>
        </div>

        <!-- Top 3 Podium -->
        <div class="podium-section reveal">
          <div class="podium">
            <!-- 2nd Place -->
            <div class="podium-place second-place" id="podium-2">
              <div class="podium-rank">2</div>
              <div class="podium-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="podium-info">
                <h3 class="podium-name">Loading...</h3>
                <div class="podium-rating">
                  <i class="fas fa-star"></i>
                  <span>0</span>
                </div>
                <div class="podium-stats">
                  <span class="win-rate">0%</span>
                </div>
              </div>
              <div class="podium-base silver">
                <i class="fas fa-medal"></i>
              </div>
            </div>

            <!-- 1st Place -->
            <div class="podium-place first-place" id="podium-1">
              <div class="podium-rank">1</div>
              <div class="crown">
                <i class="fas fa-crown"></i>
              </div>
              <div class="podium-avatar champion">
                <i class="fas fa-user"></i>
              </div>
              <div class="podium-info">
                <h3 class="podium-name">Loading...</h3>
                <div class="podium-rating">
                  <i class="fas fa-star"></i>
                  <span>0</span>
                </div>
                <div class="podium-stats">
                  <span class="win-rate">0%</span>
                </div>
              </div>
              <div class="podium-base gold">
                <i class="fas fa-trophy"></i>
              </div>
            </div>

            <!-- 3rd Place -->
            <div class="podium-place third-place" id="podium-3">
              <div class="podium-rank">3</div>
              <div class="podium-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="podium-info">
                <h3 class="podium-name">Loading...</h3>
                <div class="podium-rating">
                  <i class="fas fa-star"></i>
                  <span>0</span>
                </div>
                <div class="podium-stats">
                  <span class="win-rate">0%</span>
                </div>
              </div>
              <div class="podium-base bronze">
                <i class="fas fa-medal"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Full Leaderboard Table -->
        <div class="leaderboard-table-section reveal">
          <div class="table-header">
            <h2><i class="fas fa-list-ol"></i> 전체 랭킹</h2>
            <div class="table-info">
              <span id="totalPlayers">총 플레이어: 0명</span>
            </div>
          </div>

          <div class="leaderboard-table-wrapper">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th class="rank-col">순위</th>
                  <th class="player-col">플레이어</th>
                  <th class="rating-col sortable" data-sort="rating">
                    레이팅 <i class="fas fa-sort"></i>
                  </th>
                  <th class="games-col sortable" data-sort="games">
                    게임 수 <i class="fas fa-sort"></i>
                  </th>
                  <th class="record-col">승/무/패</th>
                  <th class="winrate-col sortable" data-sort="winrate">
                    승률 <i class="fas fa-sort"></i>
                  </th>
                  <th class="streak-col">연승</th>
                </tr>
              </thead>
              <tbody id="leaderboard-tbody">
                <tr>
                  <td colspan="7" class="loading-row">
                    <div class="spinner"></div>
                    <span>리더보드를 불러오는 중...</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Pagination -->
          <div class="pagination" id="pagination">
            <button class="page-btn" id="prevPage" disabled>
              <i class="fas fa-chevron-left"></i> 이전
            </button>
            <div class="page-numbers" id="pageNumbers">
              <!-- 동적 생성 -->
            </div>
            <button class="page-btn" id="nextPage">
              다음 <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>

        <!-- Stats Summary -->
        <div class="stats-summary reveal">
          <h2><i class="fas fa-chart-bar"></i> 리더보드 통계</h2>
          <div class="summary-grid">
            <div class="summary-card">
              <i class="fas fa-chart-line"></i>
              <div class="summary-value" id="avgRating">0</div>
              <div class="summary-label">평균 레이팅</div>
            </div>
            <div class="summary-card">
              <i class="fas fa-chess"></i>
              <div class="summary-value" id="totalGames">0</div>
              <div class="summary-label">총 게임 수</div>
            </div>
            <div class="summary-card">
              <i class="fas fa-users"></i>
              <div class="summary-value" id="activePlayers">0</div>
              <div class="summary-label">활성 플레이어</div>
            </div>
            <div class="summary-card">
              <i class="fas fa-fire"></i>
              <div class="summary-value" id="longestStreak">0</div>
              <div class="summary-label">최장 연승</div>
            </div>
          </div>
        </div>

        <!-- Rating Distribution Chart -->
        <div class="rating-distribution reveal">
          <h2><i class="fas fa-chart-pie"></i> 레이팅 분포</h2>
          <div class="chart-container">
            <div class="rating-bar" data-range="0-1000">
              <div class="bar-label">0-1000</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
            <div class="rating-bar" data-range="1000-1200">
              <div class="bar-label">1000-1200</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
            <div class="rating-bar" data-range="1200-1400">
              <div class="bar-label">1200-1400</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
            <div class="rating-bar" data-range="1400-1600">
              <div class="bar-label">1400-1600</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
            <div class="rating-bar" data-range="1600-1800">
              <div class="bar-label">1600-1800</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
            <div class="rating-bar" data-range="1800-2000">
              <div class="bar-label">1800-2000</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
            <div class="rating-bar" data-range="2000+">
              <div class="bar-label">2000+</div>
              <div class="bar-fill" style="width: 0%"></div>
              <div class="bar-value">0명</div>
            </div>
          </div>
        </div>

        <!-- CTA Section -->
        <div class="leaderboard-cta reveal">
          <h2>당신도 리더보드에 도전하세요!</h2>
          <p>게임을 시작하고 레이팅을 쌓아 최고의 플레이어가 되어보세요</p>
          <div class="cta-buttons">
            <a href="game.html" class="btn btn-primary btn-lg">
              <i class="fas fa-play"></i> 게임 시작하기
            </a>
            <a href="stats.html" class="btn btn-outline btn-lg">
              <i class="fas fa-chart-bar"></i> 내 통계 보기
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="footer-content">
        <div class="footer-text">
          <p>&copy; <span id="current-year"></span> NAK 체스. All Rights Reserved.</p>
          <p class="version">Version 1.0.0</p>
        </div>
        <div class="footer-social">
          <a href="https://github.com/nakchess" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <i class="fab fa-github" aria-hidden="true"></i>
          </a>
          <a href="https://linkedin.com/company/nakchess" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
            <i class="fab fa-linkedin" aria-hidden="true"></i>
          </a>
          <a href="https://twitter.com/nakchess" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
            <i class="fab fa-twitter" aria-hidden="true"></i>
          </a>
          <a href="https://discord.gg/nakchess" target="_blank" rel="noopener noreferrer" aria-label="Discord">
            <i class="fab fa-discord" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <script src="main.js"></script>
  <script src="js/leaderboard.js"></script>
  <script>
    // Set current year
    document.getElementById('current-year').textContent = new Date().getFullYear();

    // Enhanced Reveal on scroll animation
    const revealElements = document.querySelectorAll('.reveal');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const delay = entry.target.dataset.delay || 0;

          setTimeout(() => {
            entry.target.classList.add('visible');

            // Add stagger effect for nested elements
            const nestedElements = entry.target.querySelectorAll(
              '.summary-card, .rating-bar, .podium-place'
            );
            nestedElements.forEach((el, index) => {
              setTimeout(() => {
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
              }, index * 100);
            });
          }, parseInt(delay));
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    // Initialize nested elements with hidden state
    document.querySelectorAll(
      '.summary-card, .rating-bar, .podium-place'
    ).forEach(el => {
      el.style.opacity = '0';
      el.style.transform = 'translateY(30px)';
      el.style.transition = 'all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)';
    });

    revealElements.forEach(el => observer.observe(el));

    // Period tabs functionality
    document.querySelectorAll('.period-tab').forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs
        document.querySelectorAll('.period-tab').forEach(t => {
          t.classList.remove('active');
        });

        // Add active class to clicked tab
        this.classList.add('active');

        // Add ripple effect
        const ripple = document.createElement('span');
        ripple.style.cssText = `
          position: absolute;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.5);
          transform: scale(0);
          animation: ripple 0.6s ease-out;
          pointer-events: none;
        `;

        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = '50%';
        ripple.style.top = '50%';
        ripple.style.marginLeft = -size/2 + 'px';
        ripple.style.marginTop = -size/2 + 'px';

        this.appendChild(ripple);
        setTimeout(() => ripple.remove(), 600);
      });
    });

    // Add hover effect to podium places
    document.querySelectorAll('.podium-place').forEach(place => {
      place.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-30px) scale(1.05)';

        // Add glow effect
        const avatar = this.querySelector('.podium-avatar');
        avatar.style.boxShadow = '0 15px 40px rgba(109, 93, 216, 0.4)';
      });

      place.addEventListener('mouseleave', function() {
        this.style.transform = this.classList.contains('first-place') ? 'translateY(0)' :
                             this.classList.contains('second-place') ? 'translateY(20px)' :
                             'translateY(40px)';

        const avatar = this.querySelector('.podium-avatar');
        avatar.style.boxShadow = '';
      });
    });

    // Table sort functionality
    document.querySelectorAll('.sortable').forEach(header => {
      header.addEventListener('click', function() {
        const sortKey = this.dataset.sort;
        const icon = this.querySelector('i');

        // Toggle sort direction
        const isAscending = icon.classList.contains('fa-sort-up');

        // Reset all icons
        document.querySelectorAll('.sortable i').forEach(i => {
          i.className = 'fas fa-sort';
        });

        // Set current icon
        icon.className = isAscending ? 'fas fa-sort-down' : 'fas fa-sort-up';

        // Add animation effect
        this.style.backgroundColor = 'rgba(109, 93, 216, 0.2)';
        setTimeout(() => {
          this.style.backgroundColor = '';
        }, 300);
      });
    });

    // Add hover effect to table rows
    document.querySelectorAll('.leaderboard-table tbody tr').forEach(row => {
      row.addEventListener('mouseenter', function() {
        this.style.backgroundColor = 'rgba(109, 93, 216, 0.05)';
        this.style.transform = 'translateX(10px) scale(1.01)';
        this.style.boxShadow = '0 5px 20px rgba(0, 0, 0, 0.2)';
        this.style.zIndex = '10';
      });

      row.addEventListener('mouseleave', function() {
        this.style.backgroundColor = '';
        this.style.transform = '';
        this.style.boxShadow = '';
        this.style.zIndex = '';
      });
    });

    // Rating distribution bars animation
    const ratingBars = document.querySelectorAll('.rating-bar');
    const ratingObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const bar = entry.target;
          const fill = bar.querySelector('.bar-fill');
          const width = fill.style.width;

          // Reset width to 0 for animation
          fill.style.width = '0';

          // Animate to target width
          setTimeout(() => {
            fill.style.width = width;
          }, 200);
        }
      });
    }, { threshold: 0.5 });

    ratingBars.forEach(bar => ratingObserver.observe(bar));

    // Pagination hover effects
    document.querySelectorAll('.page-number, .page-btn').forEach(pageElement => {
      pageElement.addEventListener('mouseenter', function() {
        if (!this.disabled) {
          this.style.transform = 'translateY(-5px) scale(1.1)';
        }
      });

      pageElement.addEventListener('mouseleave', function() {
        this.style.transform = '';
      });
    });

    // Add click animation to summary cards
    document.querySelectorAll('.summary-card').forEach(card => {
      card.addEventListener('click', function() {
        this.style.transform = 'translateY(-8px) scale(0.95)';
        setTimeout(() => {
          this.style.transform = 'translateY(-8px)';
        }, 150);
      });
    });

    // Smooth scroll for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // Add CSS for ripple animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes ripple {
        to {
          transform: scale(4);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
